---
import { getJSDocTypeParameterTags } from "typescript";
import AliasOverview from "../../components/Alias/Overview";
import Layout from "../../layouts/Layout.astro";
import { getPublicUsersWithoutUser, getTeams, getVotes } from "../../lib/user";

const user = Astro.cookies.get("session")?.value;

let publicUsers;
let teams;
let votes;
if (user) {
  publicUsers = await getPublicUsersWithoutUser(user);
  teams = await getTeams(user);
  votes = await getVotes(user);
  console.log(votes);
}
---

<Layout>
  <AliasOverview
    votes={votes}
    publicUsers={publicUsers}
    teams={teams}
    client:only
  />
</Layout>
